<?xml version="1.0" encoding="utf-8"?>
<!--
This file is part of "Playful Sparkle - IndexNow" project and subject to the terms
and conditions defined in file "LICENSE", which is part of this source
code package and also available on the project page: https://github.com/playfulsparkle/oc3_indexnow.git
-->
<modification>
    <name>Playful Sparkle - IndexNow</name>
    <code>ps_indexnow</code>
    <version>1.0.0</version>
    <author>Playful Sparkle</author>
    <link>https://github.com/playfulsparkle/oc3_indexnow.git</link>
    <file path="admin/controller/catalog/category.php">
        <operation>
            <search position="replace"><![CDATA[$this->model_catalog_category->addCategory($this->request->post);]]></search>
            <add><![CDATA[if (
                    $this->config->get('feed_ps_indexnow_status') &&
                    in_array('category', (array) $this->config->get('feed_ps_indexnow_content_category'))
            ) {
                $ps_item_id = $this->model_catalog_category->addCategory($this->request->post);
                $this->load->library('playfulsparkle/ps_indexnow');
                $this->ps_indexnow->addCategory($ps_item_id, (array) $this->request->post['category_store']);
            }]]></add>
        </operation>
    </file>
    <file path="admin/controller/catalog/category.php">
        <operation>
            <search><![CDATA[$this->model_catalog_category->editCategory]]></search>
            <add position="before"><![CDATA[if (
                    $this->config->get('feed_ps_indexnow_status') &&
                    in_array('category', (array) $this->config->get('feed_ps_indexnow_content_category'))
            ) {
                $this->load->library('playfulsparkle/ps_indexnow');
                $this->ps_indexnow->editCategory($this->request->get['category_id'], (array) $this->request->post['category_store']);
            }]]></add>
        </operation>
    </file>
    <file path="admin/controller/catalog/category.php">
        <operation>
            <search><![CDATA[$this->ps_indexnow->deleteCategory]]></search>
            <add position="before"><![CDATA[if (
                    $this->config->get('feed_ps_indexnow_status') &&
                    in_array('category', (array) $this->config->get('feed_ps_indexnow_content_category'))
            ) {
                $this->load->library('playfulsparkle/ps_indexnow');
                $this->ps_indexnow->deleteCategory((array) $this->request->post['selected']);
            }]]></add>
        </operation>
    </file>
</modification>
